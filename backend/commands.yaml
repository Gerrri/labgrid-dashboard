# Labgrid Dashboard - Predefined Commands Configuration
#
# This file defines the commands that can be executed on targets through the dashboard.
# Each command has a name, the actual shell command, and a description.

commands:
  - name: "Linux Version"
    command: "cat /etc/os-release"
    description: "Shows the Linux distribution"

  - name: "System Time"
    command: "date"
    description: "Current system time"

  - name: "Kernel Version"
    command: "uname -a"
    description: "Kernel and system info"

  - name: "Uptime"
    command: "uptime"
    description: "System uptime"

  - name: "Disk Usage"
    command: "df -h"
    description: "Disk usage information"

  - name: "Memory Info"
    command: "free -h"
    description: "Memory usage information"

  - name: "Network Interfaces"
    command: "ip addr"
    description: "Network interface configuration"

  - name: "Process List"
    command: "ps aux --sort=-%mem | head -20"
    description: "Top 20 processes by memory usage"

# Commands that should be auto-refreshed when a target is viewed
auto_refresh_commands:
  - "Linux Version"
  - "System Time"
  - "Uptime"

# Scheduled commands that run periodically on all targets
# The output is displayed as a column in the target table
scheduled_commands:
  - name: "Uptime"
    command: "uptime -p"
    interval_seconds: 60
    description: "System uptime (updates every minute)"

  - name: "Load"
    command: "cat /proc/loadavg | cut -d' ' -f1-3"
    interval_seconds: 30
    description: "System load average (updates every 30s)"

  - name: "Memory"
    command: "free -h | grep Mem | awk '{print $3\"/\"$2}'"
    interval_seconds: 60
    description: "Memory usage (updates every minute)"
